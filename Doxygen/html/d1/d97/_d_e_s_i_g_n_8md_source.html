<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>slogo_team17: /tmp/git/duke-compsci308-spring2015/slogo_team17/repository/design/DESIGN.md Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">slogo_team17
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Packages</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/tmp/git/duke-compsci308-spring2015/slogo_team17/repository/design/DESIGN.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d1/d97/_d_e_s_i_g_n_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;SLogo Design</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;=====</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;Introduction</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;===</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;Our program is an IDE that supports users to write SLogo programs. The program needs to provide user interface for</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;users to enter commands, parse the command and modify a display based on the command. The top level architecture of our program</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;follows the Model-View-Controller architectural pattern. The pattern allows us to divide the program into three parts. The </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;model represents the data structures for the different types of display objects (like turtle objects, and command objects). The</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;view is composed of the different graphical windows that will be used as user interfaces. The controller will co-ordinate </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;command updates from the view to the model. These three parts of the program will provide APIs to interface with each other </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;with minimal reveal of internal variables. Using this well defined interface, our goal is to have flexibility when extending </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;one or more of the three parts without affecting the other parts. </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;Overview</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;===</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;![Pic1](/Images/Pic1.png)</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;![Pic2](/Images/Pic2.png)</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;####Backend - intro</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;At a high level, we have a Model and View class, each with various components. The Model class consists of a Turtle, Variables, CommandHistory, (XMLWriter), UserDefinedCommand, and Parser classes. The Turtle’s State component contains the turtle information that is relevant to the front end for drawing, and it has protected methods for altering its state based on the outcome of commands. Variables contains a collection of the active Variable instances in the user programming environment, and it has protected methods to add or subtract Variable instances. </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;Before continuing the description of the main model classes, it’s necessary to understand our architecture for receiving, parsing, and executing commands. First, the user inputs the command to the front end and sends it, and the front end calls Model.parseCommand(Str input). This method makes a call to the Parser object that lives in Model, giving the Parser both the string input as well as a copy of the current variables in Variables. </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;####Backend - parser design</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;The Parser is responsible for returning a correct Command object (or throwing an exception if the input is malformatted). We will use the command pattern to accomplish this, and to encapsulate the request for a command from the execution of the command itself. The Command interface specifies one method, execute(). A class would be created for each command, and each class would implement Command (ex: Move implements Command). The Parser would be responsible for creating a tree of Executable commands. While primitive commands like move and turn would be leaf nodes in this tree, control flow commands like for loops, if statements, and while loops would be parent nodes that have a List of Executable children. The Parser would create this tree, return the root of the tree to Model, and Model would perform a preorder traversal of the tree, calling the execute method on each node. Model would act as the invoker, and parser would be the client. At a later time, perhaps we could eliminate the large number of Command implementation classes and replace them with lambda expressions.</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;Consequences of this design: If a command is responsible for writing its own execute method, then the receiver of the command would need to be either the Turtle’s State or Variables, depending on the command type. Either way, a command needs read access of Variables in case the command contains a variable. One solution to this would be to have both the turtle’s State and the Variables object to be passed into the execute method as parameters (ex: execute(state s, variables v)). This would be bad since commands like move would not use the reference to variables, and variable declarations would not use the reference to the turtle’s state. Another option is give the Parser a reference to State and Variables, and then the Parser can create Command objects and pass an individual command the reference it needs in the object’s constructor.</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;####Backend - Variables</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;Variables in SLogo could be (but are not limited to) ints, doubles, or Strings. So a there’s a Variable abstract object, Variable, and it supports a number of operations. A Variable has a property on which we may perform bindings to the front end (see section: VariablesWindow).</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;The Variables object then must have a Collection of Variable’s, and protected methods in order to add or subtract variables from the collection. When a variable is declared by a command (ex: “:a = 10”). the collection of variables must be searched to see if “a” is already a variable. If not, then add a new variable. If so, then edit the existing value of “a.” Since the Parser needs access to the variables’ value’s (for instance, to parse a command like [MoveForward by “a”] where “a” is a variable), the Variables class must support some sort of read/get method. This method returns a non-destructible copy/map/something that can be given to the Parser can correctly identify whether “a” is a variable, and if so, if it’s the right type (ex: if “a” were a String, the Parser should throw an error at [MoveForward by “a”]). </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;####Backend - CommandHistory</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;The CommandHistory stores a collection of Command tree roots. Each Command tree must have a String representation. As the project scales, it may be necessary to go back or undo commands. Thus, the CommandHistory serves an important role in storing these commands, should the command interface ever add an “undo” method (or other common command pattern features). The CommandHistory, no matter its Collection’s implementation, should support a number of methods that allow references to past commands (ex: Stack’s pop method).</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;####View</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;The View class consists of a TurtleWindow, VariablesWindow, CommandHistoryWindow, and UserDefinedCommandsWindow. Within the View, there is a method to display an error message, a menu bar, and a command text box as well. The TurtleWindow is where the turtle and drawing happen. Every View component implements the same interface, which consists of a update and display method. The display creates JavaFX objects necessary to display the component, and the update method is necessary for the following observer relationships. There are a number of observer relationships with the View components. The Observable-Observer relationships: Turtle-TurtleWindow, Variables-VariablesWindow, CommandHistory-CommandHistoryWindow, and UserDefinedCommands-UserDefinedCommandsWindow. </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;####Frontend - TurtleWindow</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;First, notice that the TurtleWindow observes the Turtle, so any update to the Turtle’s State will be drawn in a public update method of TurtleWindow. For instance, when the turtle’s State changes its Point2D, the line between the old point and the new point can be drawn. When the turtle’s State changes its Angle, then the front end turtle image can rotate. DISADVANTAGES OF THIS: Note that the update method has to handle two (and more) types of changes: one to the turtle’s coordinates, one to the turtle’s angle (and possibly more). So does the update method then have to figure out what changed? ALTERNATIVE APPROACH: instead of writing our own update method for the TurtleWindow, we could try doing property bindings. For instance, the Angle object could have a DoubleProperty myAngle. We could bind that property to the frontend turtle’s ImageView rotate property. For the coordinates, we could create a Point2D alternative implementation that has two DoubleProperty’s myX, myY. Then we could bind those properties to the the frontend turtle’s ImageView x and y properties. These binding are observer relationships, but we don’t have to write an update method that has to figure out which thing changed.</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;####Frontend - VariablesWindow</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;The VariablesWindow displays all the active variables in the backend Variables class (which is itself, a collection of Variable objects). This also follows the observer pattern. Whenever the list of Variable objects changes within Variables, the VariablesWindow’s update method is called. This seems straightforward. There’s also an option to edit the frontend’s VariablesWindow and edit a variable’s value. To do this, we would have a bidirectional binding on the value of the Variable (in the backend) with the displayed variable in the frontend.</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;####Frontend - CommandHistoryWindow</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;The CommandHistoryWindow observes CommandHistory. Whenever a new command is issued to the backend, its string is added visually here. When a visual command is double clicked, CommandHistoryWindow calls Model.parseCommand on the command’s string. Alternative: when a command is double clicked, the visual command is connected to the Command tree in the backend, and executes the tree (thus skipping another parse call).</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;User Interface</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;===</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;The layout of the user interface will be as follows:</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;![UI Pic](/Images/UI.jpg)</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;Text commands are entered via a command box at the bottom of the screen. If the command is valid, it will be executed by the turtle(s) in the turtle window. If it is not, a pop-up message box will display the error and nothing in the current workspace will change.</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;The right pane displays the current workspace. User-defined variables and commands are displayed and made clickable to edit – a valid edit will be reflected on the screen, otherwise a pop-up error message box will appear. A drop-down menu for command history below displays the list of executed commands in reverse chronological order.</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;Our program window includes a menu bar at the top, with clickable tabs:</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;* *Help* loads up a HTML help page.</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;* *Preferences* allows the user to select display preferences, which will potentially include:</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;* Language</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;* Background color</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;* Turtle image</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;* Line color and thickness</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;* There may also be tab options to allow the user to save the current workspace, or reload a saved workspace.</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;Design Details</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;===</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;&gt;-Executable:</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;This is our interface for any command. It has a single method, execute(). There are six different types of commands, as listed on the 308 webpage. Each one has a abstract class (eg Control, TurtleCommand). A turtle command is simple (like mv 10), and it changes the state of the turtle. A control command (like for loop, if statement, etc.), instead takes other commands as arguments. </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;&gt;-Parser:</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;The parser takes the user-inputted string command and creates a tree of Executable objects. </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;A turtle command (eg mv 10) is a leaf node. Once it executes, there’s nothing more to it. A control object, like a for loop, can act as a parent node. All Executables (commands) that are contained within the forloop/ifstatement/ifelse/etc. with be added as children. For example, a for loop containing seven mv 10 turtle-commands would be a loop parent node with seven turtle-command children. When the loop node is reached, its execute method is to the effect of: for a certain number of iterations, for child in children, child.execute().</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;&gt;-Model:</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;The model receives this tree of Executable’s, with a reference to the root. To execute it, it simply runs root.execute(). This will run a preorder traversal of the tree and will execute each command object in order.</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;&gt;-View:</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;The View is responsible for setting up and displaying the GUI for our SLogo program. </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;There is a single public method, update(), which updates the current display window based on an ViewUpdate object generated by the Model (or Controller?).</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;The View has dropdown menus for display preferences (background color/image, line color, line thickness, turtle image), which are updated internally based on user input.</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;####API Between Model and View</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;public class Model(){</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;   private Model();</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;   public getInstance();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   public parse(String str); throws many exceptions, listed below</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;   public changeLang(String str); throws lang not found exception</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;}</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;####API within model and view</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;Interface Command(){</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;public void execute(Turtle turt, Vars var){} throws turt or var not found exception</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;Public class TurtleView(){</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;   protected void setColor(); throws invalid color exception</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   protected void setImage(); throws image file not found exception</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;   protected void setBackground();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;public class messageBox(){</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   public void display(str);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;Many classes with observable pattern: Have private notify() and public update() methods; these relationships will be defined more clearly when coding begins.</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;####API Example Code</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;User enters “forward 50”. </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;View calls Model.parse(“forward 50”).</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;Model calls Parser.parse(“forward 50”) ← potentially other parameters to this method, like giving the Parser read access</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;Parser checks for errors in the command. Parser creates Command tree. In this case, it’s very simple. Just a root with one child (MoveForward child). Parser returns root to the Model.</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;Model takes root returned by Parser, calls root.execute(). This will execute the entire tree (even though we only have a little tree).</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;Inside the MoveForward Command, execute is called by root’s execute method. MoveForward Command has a reference to the Turtle, and can read its state. It reads Turtle’s angle, determines the appropriate new coordinate displacement for the Turtle, and then makes a call to the Turtle internal API to incorporate this displacement. Turtle state is therefore changed.</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;####Exceptions that will be thrown during run time will be</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;&gt;- Invalid syntax exception</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;&gt;- Invalid value for variable exception</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;&gt;- Language file not found exception</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;&gt;- User defined command not found exception</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;Design Considerations:</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;===</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;The easiest way to break the program down into packages was to follow the Model-View-Controller pattern. But, After </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;discussing the pattern in detail, we figured out that the controller part only adds to the complexity of our program </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;because it creates a need for multi way communication with three classes, and for that cost we could saw that it wasn’t </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;going to help us clean up the code in the other classes to a great detail. We finally decided to modify the pattern by </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;taking out the controller part. We decided to create two singleton classes that will act as the highest level layers </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;for the model and the view, and the previous jobs of the controller were now going to be divided between these two top </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;level classes. And because they are singleton classes we could access their API from anywhere in our code, giving us </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;the maximum flexibility with the rest of our design. </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;For the relationship between the different view classes and the model classes they correspond to, we wanted to use the </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;Observer design pattern with our view classes registered as observers of the model classes which are the observables. </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;Registering the view classes as observers of the model classes requires passing instances of the view classes into the </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;model classes. We considered the different options of how to pass the view class instances to their respective </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;observables. One option was to add get methods in our top level view class that returns the respective observer </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;classes. Another option was to set up these observer-observable relationship in class constructors. After discussing </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;possible pros and cons for each approach, we think setting up the relationships in the constructors is a better </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;approach to follow. There is no additional hidden dependency compared to a getter and setter, and the relationship is </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;closed; it can’t be changed by other programmers calling the get methods from other classes.</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;Even after deciding to follow the observer pattern for the view and model class relationships, we noted that we were </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;also required to support editing of the different model classes(variables and user defined commands)  through the view </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;classes. To support this feature, we needed to take observer pattern one more step further and consider binding    </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;relationships. We pondered on how binding analogous view and model classes will help us update the view classes only through </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;modifications to model classes and how it will help us filter invalid edits and keep the view classes identical to their </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;analogous model classes. </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;We want all of our classes to be as opaque as possible, and make any dependencies clear. However, in order for our </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;parser to recognize references to variables, it must have access to a list of variables. This requires some read-only </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;access to vars from the parser. This seemed like the only design that kept the structure of our command objects simple.</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;Therefore, the parser will have read-access to the variables. This also provides an interface for other classes to </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;access the vars, but this cannot be avoided.</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;Team Responsiblities</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;===</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;Lien and Negatu: Front-end/view</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;Keighn and Danny: Back-end/model</div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 20 2015 12:13:14 for slogo_team17 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
